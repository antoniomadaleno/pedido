<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tempo com a menina mais linda do mundo</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            min-height: 100vh;
            min-width: 100vw;
            overflow: hidden;
            background: #2b0000;
            color: white;
            padding: 1rem;
            position: relative;
        }

        .background-photos {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            grid-auto-rows: 100px;
            gap: 5px;
            padding: 5px;
            pointer-events: none;
            opacity: 0.35;
        }

        .background-photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0;
        }

        .container {
            max-width: 800px;
            width: 100%;
            min-width: 600px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
            cursor: grab;
            user-select: none;
        }

        .container:active {
            cursor: grabbing;
        }

        .contador {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 1rem;
            border-radius: 15px;
        }

        .contador img {
            width: 100%;
            max-width: 500px;
            height: auto;
            min-height: 200px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transition: opacity 0.5s ease-in-out;
            margin-bottom: 1.5rem;
            display: block;
            margin-left: auto;
            margin-right: auto;
            object-fit: cover;
        }

        .time {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            padding: 0.8rem 1rem;
            border-radius: 12px;
            margin: 1rem 0;
            width: fit-content;
        }

        .quote {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            font-style: italic;
            line-height: 1.6;
            padding: 1rem;
            border-radius: 12px;
            max-width: 600px;
        }

        h2 {
            font-size: 1.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin: 1rem 0;
            text-align: center;
            width: 100%;
        }

        /* Media queries para mobile */
        @media (max-width: 768px) {
            body {
                padding: 0.5rem;
            }
            
            .background-photos {
                grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
                grid-auto-rows: 60px;
                gap: 2px;
                padding: 2px;
            }
            
            .contador {
                padding: 0.5rem;
            }
            
            .contador img {
                max-width: 250px;
                min-height: 130px;
            }
            
            .time {
                font-size: 1.2rem;
                padding: 0.6rem 0.8rem;
            }
            
            h2 {
                font-size: 1.3rem;
            }
            
            .quote {
                font-size: 0.9rem;
                padding: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .background-photos {
                grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
                grid-auto-rows: 50px;
            }
            
            .contador img {
                max-width: 200px;
                min-height: 100px;
            }
            
            .time {
                font-size: 1rem;
                padding: 0.5rem;
            }
            
            h2 {
                font-size: 1.1rem;
            }
            
            .quote {
                font-size: 0.8rem;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
    </style>
</head>
<body>
    <div class="background-photos">
        <img src="events/algarve.jpg" alt="Foto de fundo 1" class="background-photo">
        <img src="events/paredes_coura.jpg" alt="Foto de fundo 2" class="background-photo">
        <img src="events/glinding_barnacles.jpg" alt="Foto de fundo 3" class="background-photo">
        <img src="events/alentejo.jpg" alt="Foto de fundo 4" class="background-photo">
        <img src="events/peniche.jpg" alt="Foto de fundo 5" class="background-photo">
        <img src="events/amalfi.jpg" alt="Foto de fundo 6" class="background-photo">
        <img src="events/napoli.jpg" alt="Foto de fundo 7" class="background-photo">
        <img src="events/primavera_porto.jpg" alt="Foto de fundo 8" class="background-photo">
        <img src="events/berlin.jpg" alt="Foto de fundo 9" class="background-photo">
        <img src="events/copenhagen.jpg" alt="Foto de fundo 10" class="background-photo">
        <img src="events/malmo.jpg" alt="Foto de fundo 11" class="background-photo">
        <img src="events/costa_vicentina.jpg" alt="Foto de fundo 12" class="background-photo">
        <img src="events/fmm.jpg" alt="Foto de fundo 13" class="background-photo">
    </div>

    <div class="container">
        <div class="contador">
            <img src="" alt="Fotos do casal" id="gallery-img">
            <h2>Tempo com a menina mais linda do mundo</h2>
            <div class="time" id="contador"></div>
            <div class="quote">
                "Ia para te pedir no fim de semana que íamos passar juntos,
                mas pelas circunstâncias da vida, não será possível nos próximos tempos. 
                Perante todo este tempo (tão intenso) que já passamos juntos, 
                achei que se poderia antecipar um pouco a minha ideia antes de ficar 
                umas semanas/meses de rabinho para o ar. Gosto muito de ti. 
                Obrigado por me fazeres tão feliz! ❤️"
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const startDate = new Date('2024-11-19T22:47:00Z');
            let currentImageIndex = 0;

            // Lista de todas as imagens da pasta images/
            const images = Array.from({length: 100}, (_, i) => `images/foto${i + 1}.jpg`);
            const galleryImg = document.getElementById('gallery-img');

            function alternarImagem() {
                if (images.length <= 1) return;

                galleryImg.style.opacity = '0';

                setTimeout(() => {
                    // Tenta a próxima imagem
                    currentImageIndex = (currentImageIndex + 1) % images.length;
                    let attempts = 0;
                    
                    function tryLoadImage() {
                        const img = new Image();
                        img.onload = function() {
                            galleryImg.src = images[currentImageIndex];
                            galleryImg.style.opacity = '1';
                        };
                        img.onerror = function() {
                            // Se a imagem não existir, tenta a próxima
                            attempts++;
                            if (attempts < images.length) {
                                currentImageIndex = (currentImageIndex + 1) % images.length;
                                tryLoadImage();
                            }
                        };
                        img.src = images[currentImageIndex];
                    }

                    tryLoadImage();
                }, 500);
            }

            function atualizarContador() {
                const agora = new Date();
                const diff = agora - startDate;
                
                const anos = Math.floor(diff / (1000 * 60 * 60 * 24 * 365));
                const meses = Math.floor((diff % (1000 * 60 * 60 * 24 * 365)) / (1000 * 60 * 60 * 24 * 30));
                const dias = Math.floor((diff % (1000 * 60 * 60 * 24 * 30)) / (1000 * 60 * 60 * 24));
                const horas = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutos = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const segundos = Math.floor((diff % (1000 * 60)) / 1000);

                document.getElementById('contador').textContent = 
                    `${anos}a, ${meses}m, ${dias}d, ${horas}h, ${minutos}m, ${segundos}s`;
            }

            // Tentar carregar a primeira imagem
            if (images.length > 0) {
                const img = new Image();
                img.onload = function() {
                    galleryImg.src = images[0];
                    galleryImg.style.opacity = '1';
                };
                img.onerror = function() {
                    // Se a primeira imagem não existir, tenta encontrar uma que exista
                    alternarImagem();
                };
                img.src = images[0];
            }

            // Atualizar contador a cada segundo
            setInterval(atualizarContador, 1000);
            
            // Alternar imagem a cada 1 segundos
            setInterval(alternarImagem, 1000);
            
            // Primeira atualização do contador
            atualizarContador();

            // Adicionar evento para carregar nova imagem quando a atual terminar de carregar
            galleryImg.addEventListener('load', function() {
                this.classList.add('fade-in');
            });

            // Funcionalidade de drag para mover o container principal
            let isDragging = false;
            let startX, startY;
            let containerX = 0, containerY = 0;
            const container = document.querySelector('.container');

            // Mouse events para PC
            container.addEventListener('mousedown', function(e) {
                isDragging = true;
                startX = e.clientX - containerX;
                startY = e.clientY - containerY;
                e.preventDefault();
            });

            document.addEventListener('mousemove', function(e) {
                if (!isDragging) return;
                e.preventDefault();
                
                containerX = e.clientX - startX;
                containerY = e.clientY - startY;
                
                container.style.transform = `translate(calc(-50% + ${containerX}px), calc(-50% + ${containerY}px))`;
            });

            document.addEventListener('mouseup', function() {
                isDragging = false;
            });

            document.addEventListener('mouseleave', function() {
                isDragging = false;
            });

            // Touch events para mobile
            container.addEventListener('touchstart', function(e) {
                isDragging = true;
                const touch = e.touches[0];
                startX = touch.clientX - containerX;
                startY = touch.clientY - containerY;
                e.preventDefault();
            }, { passive: false });

            document.addEventListener('touchmove', function(e) {
                if (!isDragging) return;
                e.preventDefault();
                
                const touch = e.touches[0];
                containerX = touch.clientX - startX;
                containerY = touch.clientY - startY;
                
                container.style.transform = `translate(calc(-50% + ${containerX}px), calc(-50% + ${containerY}px))`;
            }, { passive: false });

            document.addEventListener('touchend', function() {
                isDragging = false;
            });

            document.addEventListener('touchcancel', function() {
                isDragging = false;
            });
        });
    </script>
</body>
</html>